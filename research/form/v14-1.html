<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link href="https://unpkg.com/@vbarbarosh/smcss@1.2.0/dist/reset.css" rel="stylesheet">
    <link href="https://unpkg.com/@vbarbarosh/smcss@1.2.0/dist/sm.css" rel="stylesheet">
    <title>horizontal and vertical flows | form | research | ui-helpers</title>
</head>
<body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<script src="https://unpkg.com/@vbarbarosh/ui-helpers@0.5.1/src/static/js/bundle.js"></script>
<script src="x-form-controls.js"></script>
<script>
const form_types_global = {
    'layout-basic': {
        render: function (ctx) {
            const overrides = {
                render_label: function (db_item, props, slots) {
                    return Vue.h('label', {for: db_item.form_item.id, ...props}, db_item.form_item.label);
                },
                final: function (db_item, final_cell) {
                    if (db_item.form_item.type === 'checkbox' && final_cell.insertions.label && final_cell.insertions.control) {
                        return {
                            insertions: {
                                label: () => [],
                                control: () => Vue.h('DIV', {class: 'flex-row-center-left gap10'}, {
                                    default: () => [final_cell.insertions.control(), final_cell.insertions.label()],
                                }),
                            },
                        };
                    }
                    return final_cell;
                },
            };
            const virtual_items = ctx.query({parent: ctx.db_item.form_item});
            const final_cells = virtual_items.flatMap(v => ctx.make_insertions2(v, overrides));
            return Vue.h(Vue.resolveComponent('layout-basic'), {items: final_cells});
        },
    },
    'layout-table': {
        render: function (ctx) {
            const overrides = {
                render_label: function (db_item, props, slots) {
                    return Vue.h('label', {for: db_item.form_item.id, ...props}, db_item.form_item.label);
                },
                final: function (db_item, final_cell) {
                    if (db_item.form_item.type === 'checkbox' && final_cell.insertions.label && final_cell.insertions.control) {
                        return {
                            insertions: {
                                label: () => [],
                                control: () => Vue.h('DIV', {class: 'flex-row-center-left gap10'}, {
                                    default: () => [final_cell.insertions.control(), final_cell.insertions.label()],
                                }),
                            },
                        };
                    }
                    return final_cell;
                },
            };
            const virtual_items = ctx.query({parent: ctx.db_item.form_item});
            const final_cells = virtual_items.flatMap(v => ctx.make_insertions2(v, overrides));
            return Vue.h(Vue.resolveComponent('layout-table'), {items: final_cells});
        },
        types: {
            email: 'x-input-password',
            checkbox: {
                render: function (ctx) {
                    const props = {...ctx.render_model_value_props(), id: ctx.db_item.form_item.id};
                    return Vue.h(Vue.resolveComponent('el-checkbox'), props);
                },
            },
        },
    },
    'layout-ggg': {
        render_control: function (form_item, query, make_insertions) {
            return Vue.h(Vue.resolveComponent('layout-ggg'), {items: query({parent: form_item}).flatMap(make_insertions)});
        },
        types: {
            search: 'ggg-input-search',
            number: 'ggg-input-number',
            text: 'ggg-input-text',
            textarea: 'ggg-input-textarea',
            tel: 'ggg-input-tel',
            email: 'ggg-input-email',
            url: 'ggg-input-url',
            password: 'ggg-input-password',
            checkbox: 'ggg-input-checkbox',
            radio: 'ggg-input-radio',
            color: 'ggg-input-color',
            time: 'ggg-input-time',
        },
    },
    none: {
        transform_self: function (db_item, query) {
            return [];
        },
    },
    unwrap: {
        transform_self: function (db_item, query) {
            return query({parent: db_item.form_item});
        },
    },
    virtual: {
        render: function (ctx) {
            return Vue.h('DIV', {}, '🤖 ...Virtual... 🤖');
        },
    },
    search: 'x-input-search',
    number: 'x-input-number',
    text: 'x-input-text',
    textarea: 'x-input-textarea',
    tel: 'x-input-tel',
    email: 'x-input-email',
    url: 'x-input-url',
    password: 'x-input-password',
    checkbox: 'x-input-checkbox',
    radio: 'x-input-radio',
    color: 'x-input-color',
    time: 'x-input-time',
    date: 'x-input-date',
    month: 'x-input-month',
    week: 'x-input-week',
    file: 'x-input-file',
    select: 'x-input-select',
};

const form_types_v1 = {
    'layout-elementplus': {
        render_control: function (form_item, query, make_insertions) {
            return Vue.h(Vue.resolveComponent('layout-elementplus'), {items: query({parent: form_item}).flatMap(make_insertions)});
        },
    },
    'layout-elementplus-cols': {
        render_label: function (form_item, query, make_insertions, attrs, slots) {
            return Vue.h(Vue.resolveComponent('el-form-item'), {label: form_item.label}, slots);
        },
        render_control: function (form_item, query, make_insertions) {
            return Vue.h(Vue.resolveComponent('layout-elementplus-cols'), {items: query({parent: form_item}).flatMap(make_insertions)});
        },
    },
    'layout-bootstrap5': {
        render_control: function (form_item, query, make_insertions) {
            return Vue.h(Vue.resolveComponent('layout-bootstrap5'), {items: query({parent: form_item}).flatMap(make_insertions)});
        },
    },
    'layout-bootstrap5-cols': {
        render_control: function (form_item, query, make_insertions) {
            const items = query({parent: form_item}).flatMap(function (item) {
                const out = make_insertions(item);
                if (item.form_item.$attrs['bs5-col']) {
                    out.bs5_col = item.form_item.$attrs['bs5-col'];
                }
                return out;
            });
            const cols = form_item.$attrs.cols;
            return Vue.h(Vue.resolveComponent('layout-bootstrap5-cols'), {items, cols});
        },
    },
    'layout-bootstrap5-hor': {
        render_control: function (form_item, query, make_insertions) {
            return Vue.h(Vue.resolveComponent('layout-bootstrap5-hor'), {items: query({parent: form_item}).flatMap(make_insertions), cols: form_item.$attrs.cols});
        },
    },
    'layout-basic': {
        render_control: function (form_item, query, make_insertions) {
            return Vue.h(Vue.resolveComponent('layout-basic'), {items: query({parent: form_item}).flatMap(make_insertions)});
        },
    },
    'layout-table': {
        render_control: function (form_item, query, make_insertions) {
            return Vue.h(Vue.resolveComponent('layout-table'), {items: query({parent: form_item}).flatMap(make_insertions)});
        },
    },
    'layout-group': {
        render_control: function (form_item) {
            return Vue.h(Vue.resolveComponent('layout-group'), {form_item}, {
                legend: form_item.render_label,
            });
        },
    },
    'layout-inline': {
        render_control: function (form_item, query, make_insertions) {
            return Vue.h(Vue.resolveComponent('layout-inline'), {items: query({parent: form_item}).flatMap(make_insertions)});
        },
    },
    'layout-inline-rev': {
        render_control: function (form_item, query, make_insertions) {
            return Vue.h(Vue.resolveComponent('layout-inline-rev'), {items: query({parent: form_item}).flatMap(make_insertions)});
        },
    },
    'layout-columns': {
        render_control: function (form_item, query, make_insertions) {
            return Vue.h(Vue.resolveComponent('layout-columns'), {items: query({parent: form_item}).flatMap(make_insertions)});
        },
    },
    none: {
        transform_self: function ({form_item, parent, query}) {
            return [];
        },
    },
    header: {
        make_insertions: function ({form_item, query, make_insertions}) {
            return [
                {
                    insertions: {
                        label: () => '1111',
                        control: () => '2222',
                    },
                },
                {
                    insertions: {
                        label: () => '333',
                        control: () => '444',
                    },
                },
            ];
        },
    },
    section: {
        make_insertions: function ({form_item, query, make_insertions}) {
            return [
                {
                    insertions: {
                        container: () => form_item.render_label(),
                        // control: () => 'SECTION',
                    },
                },
                ...query({parent: form_item}).flatMap(make_insertions),
            ];
        },
    },
    unwrap: {
        transform_self: function ({form_item, parent}, query) {
            return query({parent: form_item});
        },
        _transform: function (out, query) {
            return out.flatMap(v => (v.form_item.type === 'unwrap') ? query({parent: v.form_item}) : [v]);
        },
    },
    expand: {
        make_insertions: function ({form_item, query, make_insertions, storage}) {
            return [
                {
                    insertions: {
                        label: () => 'Expand',
                        control: () => Vue.h(Vue.resolveComponent('expand'), {modelValue: storage.expand1, 'onUpdate:modelValue': v => storage.expand1 = v}),
                    },
                },
                ...(!storage.expand1 ? [] : query({parent: form_item}).flatMap(make_insertions)),
            ];
        },
    },
    filter: {
        make_insertions: function ({form_item, query, make_insertions, storage}) {
            return [
                {
                    insertions: {
                        container: () => Vue.h('DIV', {class: 'gradient'}, [
                            form_item.render_label(),
                            Vue.h('input', {value: storage.filter1, 'onInput': e => storage.filter1 = e.target.value, class: 'ml5'}),
                        ]),
                    }
                }
            ];
        },
        transform: function (out, query, storage) {
            if (!storage.filter1) {
                return out;
            }
            const s = storage.filter1.toLowerCase();
            return out.filter(v => v.form_item.type === 'filter' || !v.form_item.label || v.form_item.label.toLowerCase().includes(s));
        },
    },
    checkbox: {
        name: 'input-checkbox',
        insertions: function (form_item) {
            if (form_item.$attrs.noinline !== undefined) {
                return {};
            }
            return {
                label: function () {
                    return [];
                },
                control: function () {
                    return Vue.h('DIV', {class: 'flex-row-center-left gap5'}, [
                        form_item.render_control(),
                        form_item.render_label(),
                    ]);
                },
            };
        },
    },
    checkboxes: 'input-checkboxes',
    color: 'input-color',
    date: 'input-date',
    email: 'input-email',
    file: 'input-file',
    files: 'input-files',
    int: 'input-int',
    month: 'input-month',
    password: 'input-password',
    radio: 'input-radio',
    radios: 'input-radios',
    range: 'input-range',
    search: 'input-search',
    select: 'input-select',
    'select-many': 'input-select-many',
    string: 'input-text',
    tel: 'input-tel',
    text: 'input-text',
    textarea: 'input-textarea',
    time: 'input-time',
    url: 'input-url',
    week: 'input-week',

    email: {
        render_control: function (form_item) {
            return Vue.h('input', {id: form_item.id, type: 'email', class: 'form-control', ...form_item.$attrs});
        },
    },
    password: {
        render_control: function (form_item) {
            return Vue.h('input', {id: form_item.id, type: 'password', class: 'form-control', ...form_item.$attrs});
        },
    },
    text: {
        render_control: function (form_item) {
            if (form_item.$attrs['bs5-pre']) {
                return Vue.h('div', {class: 'input-group'}, [
                    Vue.h('span', {class: 'input-group-text'}, [form_item.$attrs['bs5-pre']]),
                    Vue.h('input', {id: form_item.id, type: 'text', class: 'form-control', ...form_item.$attrs}),
                ]);
            }
            return Vue.h('input', {id: form_item.id, type: 'text', class: 'form-control', ...form_item.$attrs});
        },
    },
    checkbox: {
        make_insertions: function ({form_item, query, make_insertions, storage}) {
            const out = query({self: form_item}).flatMap(make_insertions);
            out.forEach(v => v.boostrap5_form_check = true);
            return out;
        },
        render_label: function (form_item) {
            return Vue.h('label', {for: form_item.id, class: 'form-check-label'}, form_item.label);
        },
        render_control: function (form_item) {
            return Vue.h('input', {id: form_item.id, type: 'checkbox', class: 'form-check-input', ...form_item.$attrs});
        },
        // 1. label should know!
        // 2. layout should know!
    },
    radios: {
        make_insertions: function ({form_item, query, make_insertions, storage}) {
            const out = query({self: form_item}).flatMap(make_insertions);
            out.forEach(v => v.boostrap5_radios = true);
            out.forEach(v => v.insertions.fieldset = (attrs) => Vue.h('label', attrs, form_item.$slots.label ? {default: form_item.$slots.label} : form_item.label));
            return out;
        },
        render_label: function (form_item, query, make_insertions, attrs) {
            return Vue.h('label', attrs, form_item.$slots.label ? {default: form_item.$slots.label} : form_item.label);
        },
        render_control: function (form_item, query, make_insertions, attrs) {
            const options = query({parent: form_item}).map(v => ({value: v.form_item.$attrs.value, label: v.form_item.label, disabled: v.form_item.$attrs.disabled}));
            return Vue.h(Vue.resolveComponent('bs5-radios'), {...attrs, options});
        },
        // make_insertions: function ({form_item, query, make_insertions, storage}) {
        //     const options = query({parent: form_item}).map(v => ({value: v.form_item.$attrs.value, label: v.form_item.label}));
        //     return {
        //         insertions: {
        //             container: function () {
        //                 return Vue.h(Vue.resolveComponent('bs5-radios'), {options});
        //             },
        //         },
        //     };
        // },
        // render_label: function (form_item) {
        //     return Vue.h('label', {for: form_item.id, class: 'form-check-label'}, form_item.label);
        // },
        // render_control: function (form_item) {
        //     return Vue.h('DIV', null, 'RADIOS');
        // },
    },
    select: {
        render_control: function (form_item, query, make_insertions, attrs) {
            const options = query({parent: form_item}).map(v => ({value: v.form_item.$attrs.value, label: v.form_item.label}));
            return Vue.h(Vue.resolveComponent('bs5-select'), {...attrs, options});
        },
        _make_insertions: function ({form_item, query, make_insertions, storage}) {
            const options = query({parent: form_item}).map(v => ({value: v.form_item.$attrs.value, label: v.form_item.label}));
            return {
                insertions: {
                    label: function () {
                        return Vue.h('label', {for: form_item.id, class: 'form-label'}, form_item.label);
                    },
                    control: function () {
                        return Vue.h(Vue.resolveComponent('bs5-select'), {class: 'form-select', options});
                    },
                },
            };
        },
        // render_label: function (form_item) {
        //     return Vue.h('label', {for: form_item.id}, form_item.label);
        // },
        // render_control: function (form_item) {
        //     return Vue.h('DIV', null, 'RADIOS');
        // },
    },
    hr: {
        make_insertions: function () {
            return {
                insertions: {
                    boostrap5_row: () => Vue.h('hr', {class: 'my-4'}),
                },
            };
        },
    },
    header: {
        make_insertions: function ({form_item, query, make_insertions}) {
            return {
                insertions: {
                    boostrap5_row: (attrs) => Vue.h('h4', {class: 'mb-3', ...attrs}, [
                        form_item.$slots.label ? {default: form_item.$slots.label} : form_item.label
                    ]),
                },
            };
        },
    },

    text: {
        render_label: function (form_item, query, make_insertions, attrs, slots) {
            return Vue.h(Vue.resolveComponent('el-form-item'), {label: form_item.label}, slots);
        },
        render_control: function (form_item, query, make_insertions, attrs) {
            return Vue.h(Vue.resolveComponent('el-input'), attrs);
        },
    },
    select: {
        render_label: function (form_item, query, make_insertions, attrs, slots) {
            return Vue.h(Vue.resolveComponent('el-form-item'), {label: form_item.label}, slots);
        },
        render_control: function (form_item, query, make_insertions, attrs) {
            const options = query({parent: form_item}).map(function (v) {
                return Vue.h(Vue.resolveComponent('el-option'), {label: v.form_item.label, value: v.form_item.$attrs.value});
            });
            return Vue.h(Vue.resolveComponent('el-select'), {...form_item.$attrs, ...attrs}, {default: () => options});
        },
    },
    'checkbox-switch': {
        render_label: function (form_item, query, make_insertions, attrs, slots) {
            return Vue.h(Vue.resolveComponent('el-form-item'), {label: form_item.label}, slots);
        },
        render_control: function (form_item, query, make_insertions, attrs) {
            const options = query({parent: form_item}).map(function (v) {
                return Vue.h(Vue.resolveComponent('el-option'), {label: v.form_item.label, value: v.form_item.$attrs.value});
            });
            return Vue.h(Vue.resolveComponent('el-switch'), {...form_item.$attrs, ...attrs}, {default: () => options});
        },
    },
    date: {
        render_label: function (form_item, query, make_insertions, attrs, slots) {
            return Vue.h(Vue.resolveComponent('el-form-item'), {label: form_item.label}, slots);
        },
        render_control: function (form_item, query, make_insertions, attrs) {
            return Vue.h(Vue.resolveComponent('el-date-picker'), {type: 'date', ...form_item.$attrs, ...attrs});
        },
    },
    time: {
        render_label: function (form_item, query, make_insertions, attrs, slots) {
            return Vue.h(Vue.resolveComponent('el-form-item'), {label: form_item.label}, slots);
        },
        render_control: function (form_item, query, make_insertions, attrs) {
            return Vue.h(Vue.resolveComponent('el-time-picker'), {...form_item.$attrs, ...attrs});
        },
    },
    checkboxes: {
        render_label: function (form_item, query, make_insertions, attrs, slots) {
            return Vue.h(Vue.resolveComponent('el-form-item'), {label: form_item.label}, slots);
        },
        render_control: function (form_item, query, make_insertions, attrs) {
            // <el-checkbox-group v-model="form.type">
            //     <el-checkbox value="Online activities" name="type">Online activities</el-checkbox>
            //     <el-checkbox value="Promotion activities" name="type">Promotion activities</el-checkbox>
            //     <el-checkbox value="Offline activities" name="type">Offline activities</el-checkbox>
            //     <el-checkbox value="Simple brand exposure" name="type">Simple brand exposure</el-checkbox>
            // </el-checkbox-group>
            const options = query({parent: form_item}).map(function (v) {
                return Vue.h(Vue.resolveComponent('el-checkbox'), {value: v.form_item.$attrs.value, name: 'type'}, {default: () => v.form_item.label});
            });
            return Vue.h(Vue.resolveComponent('el-checkbox-group'), {...form_item.$attrs, ...attrs}, {default: () => options});
        },
    },
    radio: {
        render_label: function (form_item, query, make_insertions, attrs, slots) {
            return Vue.h(Vue.resolveComponent('el-form-item'), {label: form_item.label}, slots);

            // render_label(form_item, attrs, slots) {
            //     return Vue.h('label', {for: form_item.id, ...attrs}, form_item.label);
            // }
        },
        render_control: function (form_item, query, make_insertions, attrs) {
            // <el-radio-group v-model="form.resource">
            //     <el-radio value="Sponsor">Sponsor</el-radio>
            //     <el-radio value="Venue">Venue</el-radio>
            // </el-radio-group>
            const options = query({parent: form_item}).map(function (v) {
                return Vue.h(Vue.resolveComponent('el-radio'), {value: v.form_item.$attrs.value}, {default: () => v.form_item.label});
            });
            return Vue.h(Vue.resolveComponent('el-radio-group'), {...form_item.$attrs, ...attrs}, {default: () => options});
        },
    },
    textarea: {
        render_label: function (form_item, query, make_insertions, attrs, slots) {
            return Vue.h(Vue.resolveComponent('el-form-item'), {label: form_item.label}, slots);
        },
        render_control: function (form_item, query, make_insertions, attrs) {
            return Vue.h(Vue.resolveComponent('el-input'), {type: 'textarea', ...form_item.$attrs, ...attrs});
        },
    },

    'eleme-date-time': {
        render_label: function (form_item, query, make_insertions, attrs, slots) {
            return Vue.h(Vue.resolveComponent('el-form-item'), {label: form_item.label}, slots);
        },
        render_control: function () {
            const comp = {
                props: ['form'],
                template: `
                    <el-col :span="11">
                        <el-date-picker v-model="form.date1" type="date" placeholder="Pick a date" style="width: 100%" />
                    </el-col>
                    <el-col :span="2" class="text-center">
                        <span class="text-gray-500">-</span>
                    </el-col>
                    <el-col :span="11">
                        <el-time-picker v-model="form.date2" placeholder="Pick a time" style="width: 100%" />
                    </el-col>
                `,
            };
            return Vue.h(comp, {form: {}});
        },
    },

};

vue_component('warn-invalid-layout-item-type', {
    props: ['item'],
    template: `
        <span>⚠️ Unknown item type: [{{ item.type }}]</span>
    `,
});

// - label
// - control
// - container
vue_component('layout-bootstrap5', {
    props: ['items'],
    template: `
        <form>
            <template v-for="item in items" v-bind:key="item.key">
                <template v-if="item.insertions.boostrap5_row">
                    <div>BS5 ROW</div>
                </template>
                <template v-else-if="item.insertions.container">
                    <div class="mb-3">
                        <render-function :fn="item.insertions.container" />
                    </div>
                </template>
                <template v-else-if="(item.insertions.label && item.insertions.control)">
                    <div v-if="item.boostrap5_form_check" class="form-check mb-3">
                        <render-function :fn="item.insertions.control" class="form-label" />
                        <render-function :fn="item.insertions.label" class="form-label" />
                        <div v-if="item.insertions.help" class="form-text">
                            <render-function :fn="item.insertions.help" />
                        </div>
                    </div>
                    <div v-else class="mb-3">
                        <render-function :fn="item.insertions.label" class="form-label" />
                        <render-function :fn="item.insertions.control" class="form-label" />
                        <div v-if="item.insertions.help" class="form-text">
                            <render-function :fn="item.insertions.help" />
                        </div>
                    </div>
                </template>
                <template v-else>
                    <warn-invalid-layout-item-type :item />
                </template>
            </template>
<!--
            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="exampleCheck1">
                <label class="form-check-label" for="exampleCheck1">Check me out</label>
            </div>
-->
        </form>
    `,
});

vue_component('layout-bootstrap5-cols', {
    props: ['items', 'cols'],
    template: `
        <div class="row g-3" novalidate>
            <template v-for="item in local_items" v-bind:key="item.key">
                <template v-if="item.insertions.boostrap5_row">
                    <render-function :fn="item.insertions.boostrap5_row" />
                </template>
                <template v-else-if="item.insertions.container">
                    <div v-bind:class="item.column_class">
                        <render-function :fn="item.insertions.container" />
                    </div>
                </template>
                <template v-else-if="(item.insertions.label && item.insertions.control)">
                    <div v-if="item.boostrap5_form_check" v-bind:class="item.column_class">
                        <div class="form-check">
                            <render-function :fn="item.insertions.control" class="form-label" />
                            <render-function :fn="item.insertions.label" class="form-label" />
                            <div v-if="item.insertions.help" class="form-text">
                                <render-function :fn="item.insertions.help" />
                            </div>
                        </div>
                    </div>
                    <div v-else v-bind:class="item.column_class">
                        <render-function :fn="item.insertions.label" class="form-label" />
                        <render-function :fn="item.insertions.control" class="form-label" />
                        <div v-if="item.insertions.help" class="form-text">
                            <render-function :fn="item.insertions.help" />
                        </div>
                    </div>
                </template>
                <template v-else>
                    <warn-invalid-layout-item-type :item />
                </template>
            </template>
<!--
            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="exampleCheck1">
                <label class="form-check-label" for="exampleCheck1">Check me out</label>
            </div>
-->
        </div>
    `,
    data: function () {
        return {
            local_items: [],
        };
    },
    watch: {
        items: {
            immediate: true,
            handler: function () {
                const cols = String(this.cols ?? '').split(/[,;|]/g).map(v => +v);
                const item_to_key = new Map(this.local_items.map(v => [v.orig, v.key]));
                this.local_items = this.items.map(function (item, i) {
                    return {
                        key: item_to_key.get(item) ?? random_html_id(),
                        insertions: item.insertions,
                        boostrap5_form_check: !!item.boostrap5_form_check,
                        column_class: render_column_class_name(item, cols[i]),
                    };
                });
                function render_column_class_name(item, n) {
                    if (item.bs5_col) {
                        return `col-md-${item.bs5_col}`;
                    }
                    if (n === 12) {
                        return 'col-12';
                    }
                    if (n) {
                        return `col-md-${n}`;
                    }
                    return 'col-12';
                }
            },
        },
    }
});

vue_component('layout-bootstrap5-hor', {
    props: ['items'],
    template: `
        <form>
            <template v-for="item in local_items" v-bind:key="item.key">
                <template v-if="item.insertions.container">
                    <div class="row mb-3">
                        <render-function :fn="item.insertions.container" />
                    </div>
                </template>
                <template v-else-if="(item.insertions.label && item.insertions.control)">
                    <fieldset v-if="item.boostrap5_radios" class="row mb-3">
                        <render-function v-if="item.insertions.fieldset" :fn="item.insertions.fieldset" class="col-form-label col-sm-2 pt-0" />
                        <render-function v-else :fn="item.insertions.label" class="col-form-label col-sm-2 pt-0" />
                        <div class="col-sm-10">
                            <render-function :fn="item.insertions.control" />
<!--
                            <div class="form-check">
                                <render-function :fn="item.insertions.control" class="form-check-input"  />
                                <render-function :fn="item.insertions.label" class="form-check-label" />
                            </div>
-->
                        </div>
                    </fieldset>
                    <div v-else-if="item.boostrap5_form_check" class="row mb-3">
                        <div class="col-sm-10 offset-sm-2">
                            <div class="form-check">
                                <render-function :fn="item.insertions.control" class="form-check-input"  />
                                <render-function :fn="item.insertions.label" class="form-check-label" />
                            </div>
                        </div>
                    </div>
                    <div v-else class="row mb-3">
                        <render-function :fn="item.insertions.label" class="col-sm-2 col-form-label" />
                        <div class="col-sm-10">
                            <render-function :fn="item.insertions.control" class="form-control" />
                        </div>
                    </div>
                </template>
                <template v-else>
                    <warn-invalid-layout-item-type :item />
                </template>
            </template>
<!--
            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="exampleCheck1">
                <label class="form-check-label" for="exampleCheck1">Check me out</label>
            </div>
-->
        </form>
    `,
    data: function () {
        return {
            local_items: [],
        };
    },
    watch: {
        items: {
            immediate: true,
            handler: function () {
                const cols = (this.cols||'').split(/[,;|]/g).map(v => +v);
                const item_to_key = new Map(this.local_items.map(v => [v.orig, v.key]));
                this.local_items = this.items.map(function (item, i) {
                    return {
                        key: item_to_key.get(item) ?? random_html_id(),
                        insertions: item.insertions,
                        boostrap5_radios: !!item.boostrap5_radios,
                        boostrap5_form_check: !!item.boostrap5_form_check,
                        column_class: render_column_class_name(cols[i]),
                    };
                });
                function render_column_class_name(n) {
                    if (n === 12) {
                        return 'col-12';
                    }
                    return `col-md-${n}`;
                }
            },
        },
    }
});

vue_component('layout-elementplus', {
    props: ['items'],
    template: `
        <el-form :model="form" label-width="auto" style="max-width:600px">
            <template v-for="item in items">
                <template v-if="item.insertions.container">
                    <render-function :fn="item.insertions.container" />
                </template>
                <template v-else-if="(item.insertions.label && item.insertions.control)">
                    <render-function :fn="item.insertions.label">
                        <render-function :fn="item.insertions.control" />
                    </render-function>
                </template>
                <template v-else>
                    <warn-invalid-layout-item-type :item />
                </template>
            </template>
        </el-form>
    `,
    data: function () {
        return {
            form: {},
        };
    },
});

vue_component('layout-elementplus-cols', {
    props: ['items'],
    template: `
        <template v-for="item,i in items">
            <template v-if="item.insertions.container">
                <el-col v-if="(i === 1)" :span="2" class="text-center">
                    <span class="text-gray-500">-</span>
                </el-col>
                <el-col :span="11">
                    <render-function :fn="item.insertions.container" style="width:100%;" />
                </el-col>
            </template>
            <template v-else>
                <warn-invalid-layout-item-type :item />
            </template>
        </template>
<!--
        <el-col :span="11">
            <el-date-picker v-model="form.date1" type="date" placeholder="Pick a date" style="width: 100%" />
        </el-col>
        <el-col :span="2" class="text-center">
            <span class="text-gray-500">-</span>
        </el-col>
        <el-col :span="11">
            <el-time-picker v-model="form.date2" placeholder="Pick a time" style="width: 100%" />
        </el-col>
-->
    `,
});

vue_component('bs5-radios', {
    emits: ['update:modelValue'],
    props: ['modelValue', 'options'],
    template: `
        <div v-for="item in local_items" v-bind:key="item.key" v-bind:class="{disabled: item.disabled}" class="form-check">
            <input v-bind:name="local_name" v-bind:id="item.key" v-bind:disabled="item.disabled" class="form-check-input" type="radio">
            <label v-bind:for="item.key" class="form-check-label">
                {{ item.label }}
            </label>
        </div>
    `,
    data: function () {
        return {
            local_name: random_html_id(),
            local_items: [],
        };
    },
    watch: {
        options: {
            immediate: true,
            handler: function () {
                const item_to_key = new Map(this.local_items.map(v => [v.orig, v.key]));
                this.local_items = this.options.map(function (item) {
                    return {
                        key: item_to_key.get(item) ?? random_html_id(),
                        value: item.value,
                        label: item.label,
                        disabled: item.disabled === '' || Boolean(item.disabled),
                        orig: item,
                    };
                });
            },
        },
    },
});

vue_component('bs5-select', {
    emits: ['update:modelValue'],
    props: ['modelValue', 'options'],
    template: `
        <select v-on:input="input">
            <option v-for="item in local_items" v-bind:key="item.key" v-bind:value="item.key" v-bind:selected="(item.value === modelValue)">
                {{ item.label }}
            </option>
        </select>
    `,
    data: function () {
        return {
            local_name: random_html_id(),
            local_items: [],
        };
    },
    watch: {
        options: {
            immediate: true,
            handler: function () {
                const item_to_key = new Map(this.local_items.map(v => [v.orig, v.key]));
                this.local_items = this.options.map(function (item) {
                    return {
                        key: item_to_key.get(item) ?? random_html_id(),
                        value: item.value,
                        label: item.label,
                        orig: item,
                    };
                });
            },
        },
    },
    methods: {
        input: function (event) {
            this.$emit('update:modelValue', this.local_items.find(v => v.key === event.target.value)?.value ?? null);
        },
    }
});

// - label
// - control
// - container
vue_component('layout-basic', {
    props: ['items'],
    template: `
        <div class="mg10">
            <template v-for="(item,i) in items" v-bind:key="item.key">
                <template v-if="(item.insertions.container)">
                    <div><render-function :fn="item.insertions.container" /></div>
                </template>
                <template v-else-if="(item.insertions.label && item.insertions.control)">
                    <div class="hsplit gap10">
                        <div class="w150"><render-function :fn="item.insertions.label" /></div>
                        <div class="fluid"><render-function :fn="item.insertions.control" /></div>
                    </div>
                </template>
                <template v-else>
                    <warn-invalid-layout-item-type :item />
                </template>
            </template>
        </div>
    `,
});

vue_component('layout-inline', {
    props: ['items'],
    template: `
        <template v-for="item in items" :key="item.key">
            <template v-if="item.insertions.container">
                <div><render-function :fn="item.insertions.container" /></div>
            </template>
            <template v-else-if="(item.insertions.label && item.insertions.control)">
                <div class="flex-row-center-left gap5">
                    <render-function :fn="item.insertions.control" />
                    <render-function :fn="item.insertions.label" />
                </div>
            </template>
            <template v-else>
                <warn-invalid-layout-item-type :item />
            </template>
        </template>
    `,
});

vue_component('layout-inline-rev', {
    props: ['items'],
    template: `
        <template v-for="item in items" :key="item.key">
            <template v-if="item.insertions.container">
                <div><render-function :fn="item.insertions.container" /></div>
            </template>
            <template v-else-if="(item.insertions.label && item.insertions.control)">
                <div class="flex-row-center-left gap5">
                    <render-function :fn="item.insertions.control" />
                    <render-function :fn="item.insertions.label" />
                </div>
            </template>
            <template v-else>
                <warn-invalid-layout-item-type :item />
            </template>
        </template>
    `,
});

// - label
// - control
// - container
// - layout_table_tr
// - layout_table_tr2
vue_component('layout-table', {
    props: ['items'],
    template: `
        <table>
            <thead>
            </thead>
            <tbody>
                <template v-for="item in items" v-bind:key="item.key">
                    <template v-if="item.insertions.layout_table_tr">
                        <render-function :fn="item.insertions.layout_table_tr" />
                    </template>
                    <template v-else-if="item.insertions.layout_table_tr2">
                        <tr>
                            <render-function :fn="item.insertions.layout_table_tr2" />
                        </tr>
                    </template>
                    <template v-else-if="item.insertions.container">
                        <tr>
                            <td colspan="2">
                                <render-function :fn="item.insertions.container" />
                            </td>
                        </tr>
                    </template>
                    <template v-else-if="(item.insertions.label && item.insertions.control)">
                        <tr>
                            <th><render-function :fn="item.insertions.label" /></th>
                            <td><render-function :fn="item.insertions.control" /></td>
                        </tr>
                    </template>
                    <template v-else>
                        <tr>
                            <td colspan="2">
                                ⚠️ Unrecognized insertions: {{ win.Object.keys(item.insertions) }}
                            </td>
                        </tr>
                    </template>
                </template>
            </tbody>
        </table>
    `,
});

vue_component('layout-columns', {
    props: ['items', 'cols'],
    template: `
        <div class="flex-row gap10">
            <template v-for="ci in computed_items" v-bind:key="ci.orig.key">
                <template v-if="ci.orig.insertions.container">
                    <div v-bind:style="ci.style">
                        <render-function :fn="ci.orig.insertions.container" />
                    </div>
                </template>
                <template v-else-if="(ci.orig.insertions.label && ci.orig.insertions.control)">
                    <div v-bind:style="ci.style" class="flex-col gap5">
                        <render-function :fn="ci.orig.insertions.label" />
                        <render-function :fn="ci.orig.insertions.control" />
                    </div>
                </template>
                <template v-else>
                    <warn-invalid-layout-item-type :item="ci.orig" />
                </template>
            </template>
        </div>
    `,
    computed: {
        computed_items: function () {
            const cols = (this.cols||'1').split(',');
            return this.items.map(function (item, i) {
                return {orig: item, style: `flex: ${cols[i] ?? 1} 0 0; min-width: 0;`};
            });
        },
    },
});

vue_component('expand', {
    emits: ['update:modelValue'],
    props: ['modelValue'],
    template: `
        <button v-if="open" v-on:click="click_collapse">collapse</button>
        <button v-else v-on:click="click_expand">expand</button>
    `,
    data: function () {
        return {
            open: this.modelValue,
        };
    },
    methods: {
        click_expand: function () {
            this.open = true;
            this.$emit('update:modelValue', this.open);
        },
        click_collapse: function () {
            this.open = false;
            this.$emit('update:modelValue', this.open);
        },
    },
});

// 👢🚀
vue_component('form-motivator', {
    props: ['items'],
    template: `
        <template v-for="item in items">
            <render-function v-if="item.insertions.container" :fn="item.insertions.container" />
        </template>
    `,
});

vue_component('x-form', {
    props: ['modelValue', 'layout'],
    inheritAttrs: false,
    provide: function () {
        return {
            form_search: Vue.ref(''),
            form_value: this.modelValue,
            form_items: {
                add: inst => this.items.push(inst),
                remove: inst => this.items.splice(this.items.indexOf(inst) >>> 0, 1),
            },
        };
    },
    template: `
        <div class="red">
            <x-form-item v-bind:type="(layout ?? 'layout-table')"><slot /></x-form-item>
        </div>
        <form-motivator :items="gogogo_v1" />
    `,
    data: function () {
        return {
            items: [],
            storage: {},
        };
    },
    computed: {
        gogogo_v1: function () {
            const _this = this;
            const ignore = new Set();
            const {storage} = this;
            const db = [];
            this.items.forEach(v => walk(null, v, form_types_global));

            const transforms = db.map(v => v.local_types[v.form_item.type]?.transform).filter(v => v);
            return query({parent: null}).flatMap(make_insertions);

            function walk(parent, form_item, parent_types) {
                const local_types = {...parent_types, ...parent_types[form_item.type]?.types};
                db.push({parent, form_item, local_types});
                form_item.child_items.forEach(child => walk(form_item, child, local_types));
            }

            function query(expr) {
                let out = expr.self
                    ? db.filter(v => v.form_item === expr.self)
                    : db.filter(v => v.parent === expr.parent);
                out = out.flatMap(v => v.local_types[v.form_item.type]?.transform_self ? v.local_types[v.form_item.type].transform_self(v, query) : [v]);
                out = transforms.reduce((a, fn) => fn(a, query, storage), out);
                // out = out.flatMap(v => (v.form_item.type === 'unwrap') ? query({parent: v.form_item}) : [v]);
                return out;
            }

            // produce final_cells from db_item
            function make_insertions2(db_item, overrides) {
                const ctx = {db_item, query, make_insertions2, render_model_value_props, render_jack_hack_slots};
                overrides ??= {};
                overrides.final ??= (x,v) => v;
                if (db_item.form_item.label) {
                    return overrides.final(db_item, {
                        insertions: {
                            source: 'P1',
                            label: (props, slots) => render_label(props, slots),
                            control: (props, slots) => render_control(props, slots),
                        },
                    });
                }
                return overrides.final(db_item, {
                    insertions: {
                        source: 'P2',
                        container: (props, slots) => render_control(props, slots),
                    },
                });
                function render_label(props, slots) {
                    if (overrides.render_label) {
                        return overrides.render_label(db_item, props, slots);
                    }
                    return Vue.h('label', {for: db_item.form_item.id, ...props}, db_item.form_item.label);
                }
                function render_control(props, slots) {
                    if (overrides.render_control) {
                        return overrides.render_control(db_item, props, slots);
                    }
                    if (db_item.local_types[db_item.form_item.type]?.render) {
                        return db_item.local_types[db_item.form_item.type].render(ctx);
                    }
                    const component = db_item.local_types[db_item.form_item.type]?.component ?? db_item.local_types[db_item.form_item.type];
                    if (typeof component !== 'string') {
                        return Vue.h('DIV', {class: 'yellow'}, [`⚠️ no type: [${db_item.form_item.type}]`]);
                    }
                    return Vue.h(Vue.resolveComponent(component), render_model_value_props(), render_jack_hack_slots());
                }
                function render_model_value_props() {
                    const modelValue = _this.modelValue?.[db_item.form_item.path];
                    const updateModelValue = !_this.modelValue ? () => 0 : v => _this.modelValue[db_item.form_item.path] = v;
                    return {modelValue, 'onUpdate:modelValue': updateModelValue};
                }
                function render_jack_hack_slots() {
                    return {
                        jack_hack_label_id: function (obj) {
                            obj.id = db_item.form_item.id;
                            return [];
                        },
                    };
                }
            }

            function make_insertions(db_item) {
                const {local_types, form_item, parent} = db_item;
                if (local_types[form_item.type].render) {
                    return make_insertions2(db_item);
                }

                if (local_types[form_item.type]?.make_insertions && !ignore.has(local_types[form_item.type]?.make_insertions)) {
                    ignore.add(local_types[form_item.type]?.make_insertions);
                    try {
                        return local_types[form_item.type]?.make_insertions({form_item, parent, make_insertions, query, storage});
                    }
                    finally {
                        ignore.delete(local_types[form_item.type]?.make_insertions);
                    }
                }
                if (local_types[form_item.type]?.render_container && !ignore.has(local_types[form_item.type]?.render_container)) {
                    return {
                        insertions: {
                            container: function (attrs) {
                                return local_types[form_item.type].render_container(form_item, query, make_insertions, attrs);
                            },
                        },
                        // ...(form_item.$attrs['bs5-col'] ? {'bs5_col': form_item.$attrs['bs5-col']} : {}),
                    };
                }
                if (form_item.label) {
                    const out = {
                        insertions: {
                            source: 'P1',
                            label: (attrs, slots) => render_label(form_item, attrs, slots),
                            control: (attrs, slots) => render_control(form_item, attrs, slots),
                        },
                        // ...(form_item.$attrs['bs5-col'] ? {'bs5_col': form_item.$attrs['bs5-col']} : {})
                    };
                    if (form_item.help) {
                        out.insertions.help = form_item.$slots.help ?? (() => Vue.h('DIV', null, form_item.help));
                    }
                    return out;
                }
                return {
                    insertions: {
                        source: 'P2',
                        container: attrs => render_control(form_item, attrs),
                    },
                    // ...(form_item.$attrs['bs5-col'] ? {'bs5_col': form_item.$attrs['bs5-col']} : {}),
                };

                // function render_label(form_item, attrs, slots) {
                //     if (local_types[form_item.type]?.render_label) {
                //         return Vue.h(local_types[form_item.type].render_label(form_item, query, make_insertions, attrs, slots));
                //     }
                //     return Vue.h('label', {for: form_item.id, ...attrs}, form_item.label);
                // }

                // context:
                //   - parent
                //   - form_item
                //   - local_types
                //   - query
                //   - make_insertions
                // render_control(attrs, slots, context)

                function render_control(form_item, attrs) {
                    if (local_types[form_item.type]?.render_control) {
                        return Vue.h(local_types[form_item.type].render_control(form_item, query, make_insertions, attrs, make_insertions2));
                    }

                    const component = local_types[form_item.type].component ?? local_types[form_item.type];
                    if (typeof component !== 'string') {
                        return Vue.h('DIV', {class: 'yellow'}, [`⚠️ no type: ${form_item.type}`]);
                    }

                    return Vue.h(Vue.resolveComponent(component), render_props(), render_slots());
                }

                function render_label(form_item, attrs, slots) {
                    if (local_types[form_item.type]?.render_label) {
                        return Vue.h(local_types[form_item.type].render_label(form_item, query, make_insertions, attrs, slots));
                    }
                    return Vue.h('label', {for: form_item.id, ...attrs}, form_item.label);
                }

                function render_props() {
                    const modelValue = _this.modelValue?.[form_item.path];
                    const updateModelValue = !_this.modelValue ? () => 0 : v => _this.modelValue[form_item.path] = v;
                    return {modelValue, 'onUpdate:modelValue': updateModelValue};
                }

                function render_slots() {
                    return {
                        jack_hack_label_id: function (obj) {
                            obj.id = form_item.id;
                            return [];
                        },
                    };
                }
            }
        },
    },
});

vue_component('x-form-item', {
    emits: ['update:modelValue'],
    props: ['modelValue', 'path', 'type', 'label', 'items', 'help'],
    inheritAttrs: false,
    inject: {
        form_value: 'form_value',
        form_search: 'form_search',
        form_items_parent: {from: 'form_items', default: {add: () => 0, remove: () => 0}},
    },
    provide: function () {
        return {
            form_items: {
                add: inst => this.child_items.push(inst),
                remove: inst => this.child_items.splice(this.child_items.indexOf(inst) >>> 0, 1),
            },
        };
    },
    template: `
        <slot>
            <x-form-item v-for="item in computed_items" v-bind="item" />
        </slot>
    `,
    data: function () {
        let ov = {};
        // if (form_types[this.type]?.insertions) {
        //     ov = form_types[this.type]?.insertions(this);
        // }

        return {
            id: `id-${crypto.randomUUID()}`,
            key: `key-${crypto.randomUUID()}`,
            insertions: {
                // label: this.render_label,
                // control: this.render_control,
                ...((this.label || this.label === '') ? {} : {container: this.render_control}),
                ...(this.$attrs.hack_ins_containerl ? {container: this.render_control} : {}),
                ...(this.$attrs.hack_ins_nolab ? {label: () => []} : {}),
                // ...ov,
                ...this.$slots,
            },
            child_items: [],
        };
    },
    computed: {
        computed_items: function () {
            const _this = this;
            return (this.items ?? []).map(function (item) {
                const out = {
                    ...item,
                    get modelValue() {
                        if (item.path === undefined) {
                            return null;
                        }
                        let out = _this.form_value;
                        item.path.split('.').forEach(key => out = out?.[key]);
                        return out;
                    },
                    'onUpdate:modelValue': function (value) {
                        if (item.path === undefined) {
                            return;
                        }
                        let key;
                        let tmp = _this.form_value;
                        item.path.split('.').forEach(function (_key) {
                            if (key) {
                                tmp = tmp[key];
                            }
                            key = _key;
                        });
                        tmp[key] = value;
                    },
                };
                delete out.path;
                return out;
            });
        },
    },
    methods: {
//         render_label: function (attrs) {
// console.log('x-form-item.render_label');
//             if (this.$slots.label) {
//                 return this.$slots.label();
//             }
//             return Vue.h('label', {for: this.id}, this.label);
//         },
//         render_control: function () {
// console.log('x-form-item.render_control');
//             if (!form_types[this.type] || (typeof form_types[this.type] === 'object' && !form_types[this.type].name)) {
//                 return [`⚠️ no type ⚠️: ${this.type}`];
//             }
//             let r;
//             try {
//                 r = Vue.resolveComponent(form_types[this.type]?.name ?? form_types[this.type]);
//             }
//             catch (error) {
//                 console.log(form_types[this.type]?.name ?? form_types[this.type]);
//                 console.error(error);
//                 r = 'DIV';
//             }
//             return Vue.h(r, {
//                 id: this.id,
//                 modelValue: this.modelValue,
//                 'onUpdate:modelValue': v => this.$emit('update:modelValue', v),
//             });
//         },
    },
    created: function () {
        this.form_items_parent.add(this);
    },
    unmounted: function () {
        this.form_items_parent.remove(this);
    },
});

vue_component('render-function', {
    inheritAttrs: false,
    props: ['fn'],
    render: function () {
        return this.fn(this.$attrs, this.$slots);
    },
});

vue_component('app', {
    template: `
    <div class="fix-f hsplit gap15 m10">
        <div class="p10 mg15 oa">
            <div class="p10 bs5">
                <h4>Basic Form</h4>
                <x-form v-model="basic_form" layout="layout-basic">
                    <x-form-item path="email" type="email" label="Email" />
                    <x-form-item path="check_me_out"" type="checkbox" label="Check me out" />
                    <x-form-item path="ggg"" type="none" label="None..." />
                    <x-form-item type="unwrap" label="None...">
                        <x-form-item path="text1" type="text" label="Text1" />
                        <x-form-item path="text2" type="text" label="Text2" />
                    </x-form-item>
                    <x-form-item type="virtual" />
                </x-form>
            </div>
<template v-if="false">
            <div class="p10 bs5">
                <h4>Login Form</h4>
                <x-form v-model="login_form">
                    <x-form-item path="email" type="email" label="Email" />
                    <x-form-item path="password" type="password" label="Password" />
                    <x-form-item path="check_me_out"" type="checkbox" label="Check me out" />
                </x-form>
            </div>
            <div class="p10 bs5">
                <h4>Google Drive Form <small><a href="https://wpforms.com/templates/google-drive-form-template/" target="_blank">src</a></small></h4>
                <x-form v-model="google_drive_form">
                    <x-form-item type="text" path="first_name" label="First Name" />
                    <x-form-item type="text" path="last_name" label="Last Name" />
                    <x-form-item type="email" path="email"" label="Email" />
                    <x-form-item type="file" path="file" label="File Upload" />
                    <x-form-item type="textarea" path="comments" label="Comment or Message" />
                </x-form>
            </div>
            <div class="p10 bs5">
                <h4>Bootstrap Form <small><a href="https://getbootstrap.com/docs/5.3/forms/validation/" target="_blank">src</a></small></h4>
                <x-form v-model="bootstrap_form">
                    <x-form-item type="text" label="First Name" />
                    <x-form-item type="text" label="Last Name" />
                    <x-form-item type="text" label="Username" />
                    <x-form-item type="text" label="City" />
                    <x-form-item type="text" label="State" />
                    <x-form-item type="text" label="Zip" />
                    <x-form-item type="checkbox" label="Agree to terms and conditions" />
                </x-form>
            </div>
            <div class="p10 bs5">
                <h4>Element+ Basic Form <small><a href="https://element-plus.org/en-US/component/form#basic-form" target="_blank">src</a></small></h4>
                <x-form v-model="element_plus_form">
                    <x-form-item type="text" label="Activity name" />
                    <x-form-item type="select" label="Activity zone">
                        <x-form-item type="option" value="1" label="Zone One" />
                        <x-form-item type="option" value="2" label="Zone Two" />
                    </x-form-item>
                    <x-form-item type="custom" label="Activity time" />
                    <x-form-item type="checkbox" label="Instant delivery" />
                    <x-form-item type="checkboxes" label="Activity type">
                        <x-form-item type="option" value="online" label="Online activities" />
                        <x-form-item type="option" value="promo" label="Promotion activities" />
                        <x-form-item type="option" value="offline" label="Offline activities" />
                        <x-form-item type="option" value="brand" label="Simple brand exposure" />
                    </x-form-item>
                    <x-form-item type="radio" label="Resources">
                        <x-form-item type="option" value="sponsor" label="Sponsor" />
                        <x-form-item type="option" value="venue" label="Venue" />
                    </x-form-item>
                    <x-form-item type="textarea" label="Activity form" />
                </x-form>
            </div>
</template>
        </div>
        <div class="dashed xborder-vr" />
        <div class="p10 oa">
            right
            <div class="flex-col-center-left">
                <table>
                <tbody>
                    <tr>
                        <th>x-input-search</th>
                        <td><x-input-search v-model="form.search1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-number</th>
                        <td><x-input-number v-model="form.number1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-text</th>
                        <td><x-input-text v-model="form.text1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-textarea</th>
                        <td><x-input-textarea v-model="form.textarea1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-tel</th>
                        <td><x-input-tel v-model="form.tel1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-email</th>
                        <td><x-input-email v-model="form.email1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-url</th>
                        <td><x-input-url v-model="form.url1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-password</th>
                        <td><x-input-password v-model="form.password1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-checkbox</th>
                        <td><x-input-checkbox v-model="form.checkbox1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-radio</th>
                        <td><x-input-radio v-model="form.radio11" name="radio1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-radio</th>
                        <td><x-input-radio v-model="form.radio12" name="radio1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-radio</th>
                        <td><x-input-radio v-model="form.radio13" name="radio1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-radio</th>
                        <td><x-input-radio v-model="form.radio21" name="radio2" /></td>
                    </tr>
                    <tr>
                        <th>x-input-radio</th>
                        <td><x-input-radio v-model="form.radio22" name="radio2" /></td>
                    </tr>
                    <tr>
                        <th>x-input-radio</th>
                        <td><x-input-radio v-model="form.radio23" name="radio2" /></td>
                    </tr>
                    <tr>
                        <th>x-input-color</th>
                        <td><x-input-color v-model="form.color1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-time</th>
                        <td><x-input-time v-model="form.time1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-date</th>
                        <td><x-input-date v-model="form.date1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-month</th>
                        <td><x-input-month v-model="form.month1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-week</th>
                        <td><x-input-week v-model="form.week1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-file</th>
                        <td><x-input-file v-model="form.file1" /></td>
                    </tr>
                    <tr>
                        <th>x-input-select</th>
                        <td><x-input-select v-model="form.select1" :options="options1" /></td>
                    </tr>
                </tbody>
                </table>
            </div>
        </div>
        <div class="dashed xborder-vr" />
        <div>
            <table>
            <tbody>
            <tr>
                <th>basic_form</th>
                <td><pre>{{ basic_form }}</pre></td>
            </tr>
            <tr>
                <th>login_form</th>
                <td><pre>{{ login_form }}</pre></td>
            </tr>
            <tr>
                <th>google_drive_form</th>
                <td><pre>{{ google_drive_form }}</pre></td>
            </tr>
            <tr>
                <th>bootstrap_form</th>
                <td><pre>{{ bootstrap_form }}</pre></td>
            </tr>
            <tr>
                <th>element_plus_form</th>
                <td><pre>{{ element_plus_form }}</pre></td>
            </tr>
            <tr>
                <th>form</th>
                <td><pre>{{ form }}</pre></td>
            </tr>
            </tbody>
            </table>
        </div>
    </div>
`,
    data: function () {
        return {
            options1: [{label: 'Apple'}, {label: 'Banana'}, {label: 'Grape'}],
            basic_form: {},
            login_form: {},
            google_drive_form: {},
            bootstrap_form: {},
            element_plus_form: {},
            form: {
                name: '',
                region: '',
                date1: '',
                date2: '',
                delivery: false,
                type: [],
                resource: '',
                desc: '',
            },
        };
    },
    methods: {
        onSubmit: function () {
            console.log('submit!')
        },
    },
    computed: {
        form_json: function () {
            return JSON.stringify(this.form, null, 4);
        },
    },
})
</script>

</body>
</html>
