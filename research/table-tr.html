<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vue 3 TableSel Encapsulated Example</title>
    <link href="https://unpkg.com/@vbarbarosh/smcss@1.2.0/dist/reset.css" rel="stylesheet">
    <link href="https://unpkg.com/@vbarbarosh/smcss@1.2.0/dist/sm.css" rel="stylesheet">
    <style>
    pre { margin: 0; padding: 5px 10px; }
    table { width: auto; }
    .gap15 { gap: 15px; }
    </style>
</head>
<body>

<div class="hsplit gap15">
<div id="app">
    <table-sel :items="items" :columns="columns">
        <template v-slot:tr="{item, props}">
            <tr v-on:mouseover="mouseover(item)" v-bind="props" />
        </template>
    </table-sel>
</div>
<pre class="dashed">
table-sel
How to add props/event to TR element

Ideally:
    &lt;table-sel :items="items" :columns="columns">
        &lt;template v-slot:tr="{item}">
            &lt;tr v-on:mouseover="mouseover(item)" />
        &lt;/template>
    &lt;/table-sel>

But, it already has slots:
    &lt;table-sel :items="items" :columns="columns">
        &lt;template v-slot:action="{item}">
            &lt;button>copy&lt;/button>
            &lt;button>remove&lt;/button>
        &lt;/template>
    &lt;/table-sel>

The following is good enough:
    &lt;table-sel :items="items" :columns="columns">
        &lt;template v-slot:tr="{item}">
            &lt;tr v-on:mouseover="mouseover(item)" />
        &lt;/template>
        &lt;template v-slot:action="{item}">
            &lt;button>copy&lt;/button>
            &lt;button>remove&lt;/button>
        &lt;/template>
    &lt;/table-sel>
</pre>
</div>

<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
<script>
const TableSel = {
    name: 'TableSel',
    props: ['items', 'columns'],
    render: function () {
        const slot = this.$slots.tr;
        const columns = this.columns;
        return Vue.h('table', {}, [
            Vue.h('thead', [
                Vue.h('tr', columns.map(col => Vue.h('th', col.label))),
            ]),
            Vue.h('tbody', this.items.map(function (item, idx) {
                const props = {'data-idx': idx};
                const defaultTds = columns.map(col => Vue.h('td', item[col.key]));
                if (slot) {
                    // Slot returns [VNode], expect single <tr>
                    const slotNodes = slot({item, props});
                    // Use first returned VNode, and clone with <td>s as children
                    const trNode = Array.isArray(slotNodes) ? slotNodes[0] : slotNodes;
                    if (trNode && trNode.type === 'tr') {
                        // Clone <tr>, replace children with our <td>s
                        return Vue.h('tr', trNode.props, defaultTds);
                    }
                    else {
                        // fallback if slot doesn't return <tr>
                        return Vue.h('tr', props, defaultTds);
                    }
                }
                else {
                    return Vue.h('tr', props, defaultTds);
                }
            })),
        ]);
    }
};

const app = Vue.createApp({
    components: {TableSel},
    data: function () {
        return {
            columns: [
                { key: 'id', label: 'ID' },
                { key: 'name', label: 'Name' },
                { key: 'value', label: 'Value' },
            ],
            items: [
                { id: 1, name: 'Item 1', value: 10 },
                { id: 2, name: 'Item 2', value: 20 },
                { id: 3, name: 'Item 3', value: 30 },
            ],
        };
    },
    methods: {
        mouseover: function (item) {
            console.log('Hovered: ' + item.name);
        },
    },
});

app.mount('#app');
</script>
</body>
</html>
